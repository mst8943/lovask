(()=>{let t=self;t.addEventListener("push",i=>{let n=i.data?.json()||{},o=n.title||"Lovask",e={body:n.body||"You have a new notification.",data:{url:n.url||"/"},icon:"/icon-512x512.png",badge:"/icon-512x512.png"};i.waitUntil(t.registration.showNotification(o,e))}),t.addEventListener("notificationclick",i=>{i.notification.close();let n=i.notification?.data,o="object"==typeof n&&n&&"url"in n?String(n.url||"/"):"/";i.waitUntil(t.clients.matchAll({type:"window",includeUncontrolled:!0}).then(i=>{for(let t of i)if("focus"in t)return t.navigate(o),t.focus();return t.clients.openWindow(o)}))})})();