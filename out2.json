[
  "    \r",
  "    // START: REAL-TIME PRESENCE LOGIC\r",
  "    const otherLastActive = (otherUser as { last_active_at?: string | null; users?: { last_active_at?: string | null } | null })?.last_active_at\r",
  "        || (otherUser as { users?: { last_active_at?: string | null } | null })?.users?.last_active_at\r",
  "        || null\r",
  "    const isOnlineFallback = otherLastActive ? now - new Date(otherLastActive).getTime() < 10 * 60 * 1000 : false\r",
  "    const isOnlineRealtime = otherUser ? usePresenceStore((s) => s.onlineUsers.has(otherUser.id)) : false\r",
  "    const otherOnline = otherUser && (otherUser as any).is_bot ? true : (isOnlineRealtime || isOnlineFallback)\r",
  "    // END: REAL-TIME PRESENCE LOGIC\r",
  "\r",
  "    const matchDateLabel = match.created_at ? new Date(match.created_at).toLocaleDateString() : '—'\r",
  "    const isRequestRecipient = messageRequest?.recipient_id === user?.id\r",
  "    const showRequestBanner = messageRequest?.status === 'pending' && isRequestRecipient\r",
  "    const canRequest = messages.length === 0 && (messageRequestMode === 'request' || (messageRequestMode === 'verified_only' && !isSelfVerified))\r",
  "    const hasAcceptedRequest = messageRequest?.status === 'accepted'\r",
  "    return (\r",
  "        <div className=\"fixed inset-x-0 top-[60px] bottom-[64px] flex flex-col bg-[var(--background)] pb-0 md:static md:mx-auto md:max-w-5xl md:pb-8\">\r",
  "            <div className=\"absolute inset-0 pointer-events-none\">\r",
  "                <div className=\"absolute -top-16 -left-10 w-48 h-48 bg-pink-500/10 blur-3xl rounded-full\" />\r",
  "                <div className=\"absolute top-32 -right-16 w-52 h-52 bg-violet-500/10 blur-3xl rounded-full\" />\r",
  "            </div>\r",
  "            <div className=\"flex items-center gap-4 px-4 py-3 border-b border-white/10 bg-[var(--background)]/70 backdrop-blur-md z-10 sticky top-0\">\r",
  "                <Button\r",
  "                    type=\"button\"\r",
  "                    variant=\"ghost\"\r",
  "                    size=\"icon\"\r",
  "                    onClick={() => router.back()}\r",
  "                    className=\"p-2 -ml-2 hover:bg-white/10 rounded-full\"\r",
  "                >\r",
  "                    <ArrowLeft size={20} />\r",
  "                </Button>\r",
  "                <div className=\"relative w-10 h-10 rounded-full overflow-hidden border border-pink-500/50\">\r",
  "                    <Image\r",
  "                        src={photoUrl}\r",
  "                        alt={otherUser?.display_name || 'User'}\r",
  "                        fill\r",
  "                        className=\"object-cover\"\r",
  "                    />\r",
  "                </div>\r",
  "                <div className=\"flex-1\">\r",
  "                    <h3 className=\"font-bold text-sm flex items-center gap-2\">\r",
  "                        {otherUser?.display_name}\r",
  "                        {showPremiumBadge && <Star size={12} className=\"text-yellow-500 fill-yellow-500\" />}\r",
  "                    </h3>\r",
  "                    {isOtherTyping ? (\r",
  "                        <span className=\"text-xs text-pink-400\">Yazıyor...</span>\r",
  "                    ) : otherOnline ? (\r",
  "                        <span className=\"text-xs text-green-500 flex items-center gap-1\">\r",
  "                            <span className=\"w-2 h-2 bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)] rounded-full\" /> Çevrim içi\r",
  "                        </span>\r"
]